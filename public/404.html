<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting...</title>
    <script>
      // GitHub Pages SPA routing fix - Redirect to index.html
      (function() {
        var path = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        
        // Store the original path in sessionStorage before redirecting
        // This will be used by React Router to restore the route
        if (path && path !== '/' && path !== '/index.html' && !path.includes('/index.html')) {
          sessionStorage.setItem('githubPagesRedirect', path);
        }
        
        // Determine base path from current location
        // For project pages: /repo-name/admin/dashboard -> base is /repo-name/
        // For user pages: /admin/dashboard -> base is /
        var pathSegments = path.split('/').filter(function(seg) { return seg && seg !== ''; });
        var basePath = '/';
        var knownRoutes = ['admin', 'login', 'index.html', '404.html'];
        
        // If we have path segments and the first one is not a known route, it's likely the repo name
        if (pathSegments.length > 0) {
          var firstSegment = pathSegments[0];
          // Check if first segment looks like a repo name (not a route, not a file)
          if (knownRoutes.indexOf(firstSegment) === -1 && firstSegment.indexOf('.') === -1) {
            basePath = '/' + firstSegment + '/';
          }
        }
        
        // Redirect to index.html with the correct base path
        var redirectUrl = basePath + 'index.html' + search + (hash || '');
        window.location.replace(redirectUrl);
      })();
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
    <noscript>
      <p>Please enable JavaScript to view this site.</p>
      <p><a href="/">Click here to go to the home page</a></p>
    </noscript>
  </body>
</html>
